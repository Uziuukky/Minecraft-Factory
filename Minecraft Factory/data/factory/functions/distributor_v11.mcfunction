kill @e[tag=divisionSBF]
kill @e[tag=divisionSIFF]

execute as @a[tag=playF,nbt={SelectedItem:{id:"minecraft:target",tag:{Distributor:1b}}}] at @s anchored eyes positioned ^ ^ ^3 align xyz run summon falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:gray_stained_glass"},NoGravity:1b,HasVisualFire:0b,Time:1,Tags:["divisionSBF"]}
execute as @a[tag=playF,nbt={SelectedItem:{id:"minecraft:target",tag:{Distributor:1b}}},y_rotation=135.1..-135] at @s anchored eyes positioned ^ ^ ^3 run summon item_frame ~ ~1 ~ {NoGravity:1b,Facing:1b,Fixed:1b,ItemRotation:4b,Invulnerable:1b,Invisible:1b,Tags:["divisionSIFF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,nbt={SelectedItem:{id:"minecraft:target",tag:{Distributor:1b}}},y_rotation=-134.9..-45.1] at @s anchored eyes positioned ^ ^ ^3 run summon item_frame ~ ~1 ~ {NoGravity:1b,Facing:1b,Fixed:1b,ItemRotation:6b,Invulnerable:1b,Invisible:1b,Tags:["divisionSIFF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,nbt={SelectedItem:{id:"minecraft:target",tag:{Distributor:1b}}},y_rotation=-45.1..45] at @s anchored eyes positioned ^ ^ ^3 run summon item_frame ~ ~1 ~ {NoGravity:1b,Facing:1b,Fixed:1b,ItemRotation:2b,Invulnerable:1b,Invisible:1b,Tags:["divisionSIFF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,nbt={SelectedItem:{id:"minecraft:target",tag:{Distributor:1b}}},y_rotation=45.1..135] at @s anchored eyes positioned ^ ^ ^3 run summon item_frame ~ ~1 ~ {NoGravity:1b,Facing:1b,Fixed:1b,ItemRotation:0b,Invulnerable:1b,Invisible:1b,Tags:["divisionSIFF"],Item:{id:"minecraft:oak_stairs",Count:1b}}

execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]}] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air run tag @s add completeDTF
execute as @a[tag=playF,y_rotation=45.1..135,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run summon item_frame ~ ~1 ~ {Invulnerable:1b,Facing:1b,ItemRotation:0b,Invisible:1b,Tags:["divisionF","arrowDF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,y_rotation=135.1..-135,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run summon item_frame ~ ~1 ~ {Invulnerable:1b,Facing:1b,ItemRotation:4b,Invisible:1b,Tags:["divisionF","arrowDF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,y_rotation=-134.9..-45.1,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run summon item_frame ~ ~1 ~ {Invulnerable:1b,Facing:1b,ItemRotation:6b,Invisible:1b,Tags:["divisionF","arrowDF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,y_rotation=-45.1..45,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run summon item_frame ~ ~1 ~ {Invulnerable:1b,Facing:1b,ItemRotation:2b,Invisible:1b,Tags:["divisionF","arrowDF"],Item:{id:"minecraft:oak_stairs",Count:1b}}
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run playsound minecraft:block.wood.place master @s ~ ~ ~ 100 1 1
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air align xyz run particle minecraft:block minecraft:target ~0.5 ~0.5 ~0.5 0.3 0.3 0.3 0 50 normal @a
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ air unless block ~ ~-1 ~ air run setblock ~ ~ ~ target keep
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ minecraft:target unless block ~ ~-1 ~ air run clear @s minecraft:target{Distributor:1b} 1
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]},tag=completeDTF] at @s anchored eyes positioned ^ ^ ^3 if block ~ ~ ~ minecraft:target unless block ~ ~-1 ~ air run tag @s remove completeDTF
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]}] at @s anchored eyes positioned ^ ^ ^3 unless block ~ ~-1 ~ air store result score @s distributorIUF run data get entity @s Inventory[{Slot:-106b}].Count
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]}] at @s anchored eyes positioned ^ ^ ^3 unless block ~ ~-1 ~ air run summon minecraft:item ^ ^-1 ^-3 {Tags:["divisionSIF"],PickupDelay:0,Item:{id:"minecraft:target",Count:1b,tag:{Distributor:1b,display:{Name:'{"text":"배분기","color":"#949494","bold":false,"italic":false}'}}}}
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]}] at @s anchored eyes positioned ^ ^ ^3 unless block ~ ~-1 ~ air store result entity @e[tag=divisionSIF,limit=1,sort=nearest] Item.Count int 1 run scoreboard players get @s distributorIUF
execute as @a[tag=playF,nbt={Inventory:[{id:"minecraft:target",Slot:-106b,tag:{Distributor:1b}}]}] at @s anchored eyes positioned ^ ^ ^3 unless block ~ ~-1 ~ air unless block ~ ~ ~ air run item replace entity @s weapon.offhand with air 1

execute as @e[tag=distributorRIF] at @s run give @s target{Distributor:1b,display:{Name:'{"text":"배분기","color":"#949494","bold":false,"italic":false}'}} 1
execute as @e[tag=distributorRIF] at @s run tag @s remove distributorRIF

execute as @e[tag=arrowDF] at @s if block ~ ~-1 ~ air run kill @s
execute as @e[tag=arrowDF] at @s unless block ~ ~ ~ air run kill @s

execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:2b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=0}] run scoreboard players set @s rotationF 3
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:4b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=0}] run scoreboard players set @s rotationF 4
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:6b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=0}] run scoreboard players set @s rotationF 1
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:0b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=0}] run scoreboard players set @s rotationF 2
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:2b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=1}] run scoreboard players set @s rotationF 4
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:4b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=1}] run scoreboard players set @s rotationF 1
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:6b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=1}] run scoreboard players set @s rotationF 2
execute as @e[tag=itemF] at @s positioned ~ ~1 ~ if entity @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:0b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}},distance=0..0.05,scores={divisionRF=1}] run scoreboard players set @s rotationF 3

execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:2b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~1 ~-1 ~ if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 1
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:2b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~ ~-1 ~1 if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 0
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:4b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~ ~-1 ~1 if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 1
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:4b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~-1 ~-1 ~ if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 0
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:6b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~-1 ~-1 ~ if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 1
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:6b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~ ~-1 ~-1 if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 0
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:0b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~ ~-1 ~-1 if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 1
execute as @e[tag=arrowDF,tag=divisionF,nbt={Facing:1b,ItemRotation:0b,Invisible:1b,Item:{id:"minecraft:oak_stairs",Count:1b}}] at @s positioned ~ ~-1 ~1 if entity @e[tag=itemF,distance=0..0.5] run scoreboard players set @s divisionRF 0